title: THP
description: Benchmark for different runtimes with and without glibc hack

limits:
  time: 5 # s
#  time: 3600
  memory: 8048 # mb
  scheduler_memory: 32768 #mb

steps:
  run:
    - module: reprobench.core.sysinfo.CollectSystemInfo4Server
    - module: reprobench.core.setup.SetupKernel
      config:
        transparent_hugepage: madvise
    # TODO: performance govenors / --cpu-freq srun
    - module: reprobench.executors.RunSolverPerfEval
    # provide non-perf runner
    # provide configurable perf parameters
#    - module: reprobench.executors.PsmonExecutor
      config:
        nonzero_rte: False

observers:
  - module: reprobench.core.sysinfo.SystemInfoObserver
#  - module: reprobench.executors.RunStatisticObserver
  - module: reprobench.executors.RunStatisticExtendedObserver

#  analysis:
#    - module: reprobench.statistics.tables.RunTable
#      config:
#        joins:
#          - reprobench.executors.db.RunStatistic
#          - reprobench.core.sysinfo.RunNode
#        output: statistics/raw.csv
#    - module: reprobench.statistics.tables.RunSummaryTable
#      config:
#        output: statistics/summary.csv
#    - module: reprobench.statistics.plots.CactusPlot
#      config:
#        measure: wall_time
#        output: statistics/cactus.ipynb

tasks:
  sat_gauss_bench:
    type: file
#    urls:
#      - https://www.cs.uni-potsdam.de/wv/projects/sets/set-industrial-09-12-gauss.tar.xz
    path: /projects/p_gpusat/automated-reasoner-builds/benchmarks/SAT_gauss
#    path: ./tasks/thp/sat/
    extract_archives: true
    patterns: |
      AProVE09-05.cnf.gz
      !**/*.tar.bz2
      !**/*.tar.xz
      !**/*.tar.gz
      !**/*.tgz
      !**/.*
      !**.*~
#      **/*
#      AProVE09-01.cnf.gz

#  sat2014_app_bench:
#    type: file
##    urls:
##      - http://satcompetition.org/2014/files/sc14-app.tar
#    path: /scratch/p_gpusat/automated-reasoner-builds/benchmark/SAT_2014app/
##    path: ./tasks/thp/sat/
#    extract_archives: true
#    err_patterns: |
#      **/*
#      !**/*.tar.bz2
#      !**/*.tar.xz
#      !**/*.tar.gz
#      !**/*.tgz
#      !**/*.tar
#      !**/.*
#      !**.*~

#  asp_bench:
#    type: file
##    type: url
##    urls:
##      - https://www.cs.uni-potsdam.de/wv/projects/sets/set-asp-gauss.tar.xz
#    path: /scratch/p_gpusat/automated-reasoner-builds/benchmarks/ASP_gauss/
##    path: ./tasks/thp/ASP/
#    extract_archives: true
#    err_patterns: |
#      csp010-SocialGolfer_w3_g3_s6.dlv.dat.lp.lp
#      !**/*.tar.bz2
#      !**/*.tar.xz
#      !**/*.tar.gz
#      !**/*.tgz
#      !**/.*
#      !**/*~
#      **/*.*

#   dfremont:
#     type: file
# #       urls:
# #        - https://github.com/dfremont/counting-benchmarks.git
#     path: /projects/p_gpusat/automated-reasoner-builds/benchmarks/mc
#     extract_archives: true
#     err_patterns: |
#       *.gz
#       !*.b+e.gz
#       !*.pmc.gz
#       !*.pmcstar.gz
#       !**/*.tar.bz2
#       !**/*.tar.xz
#       !**/*.tar.gz
#       !**/*.tgz
#       !**/.*
#       !**.*~
#   #      **/*
# #
# #      4step.cnf.gz
# #TODO: separate runs

tools:
  sat:
    module: experiment.thp.tool.sat.satExecutor.SATTool
    parameters:
      #name of parameter configuration: we may have multiple ones
      default:
        s:
#          - minisat
#          - mergesat
#          - plingeling
#          - glucose-4.2.1
#          - lingeling
#          - lingelingplain
#          - MapleLCMDiscChronoBT-DL-v3
#          - zchaff.2001
#          - zchaff.2004.05.13
#          - zchaff.2004.11.15
#          - zchaff.2007.03.12_x64
#          - grasp.1996_jkf_mh
#          - grasp.2008.06.22_armin1
#          - grasp.2008.06.22_armin2
          - cryptominisat5
          - belsat
# DOES NOT WORK YET
#          - berkmin
          - minisat2.0
          - rsat_2.0
          - siege_v1
          - siege_v3
          - siege_v4
#          - ubcsat2006gsat
#          - ubcsat2006gsats
#          - ubcsat2006gwsat
#          - ubcsat2006gsat-tabu
#          - ubcsat2006hsat
#          - ubcsat2006hwsat
#          - ubcsat2006walksat
#          - ubcsat2006walksat-tabu
#          - ubcsat2006novelty
#          - ubcsat2006novelty+
#          - ubcsat2006novelty++
#          - ubcsat2006adaptnovelty+
#          - ubcsat2006rnovelty
#          - ubcsat2006rnovelty+
#          - ubcsat2006saps
#          - ubcsat2006rsaps
#          - ubcsat2006sapsnr
#          - ubcsat2006paws
#          - ubcsat2006ddfw
#          - ubcsat2006g2wsat
#          - ubcsat2006rots
#          - ubcsat2006irots
#          - ubcsat2006samd
#          - ubcsat2006urwalk
#          - ubcsat2006crwalk
        t:
          - 0
#          - 1
        p:
          - none
#          - satelite
#          - minisat2
#          - glucose
  asp:
    module: experiment.thp.tool.asp.aspExecutor.ASPTool
    parameters:
      default:
        s:
          - clasp
          - wasp
        t:
          - 0
          - 1

  mc:
    module: experiment.thp.tool.wmc.wmcExecutor.WMCTool
    parameters:
      #name of parameter configuration: we may have multiple ones
      default:
        s:
          - approxmc
#missing 32bit ELFs
#          - c2d
          - cachet
          - d4
          - ganak
#missing 32bit ELFs for dependency hgr2htree
#          - minic2d
          - sharpsat
        t:
          - 0
          - 1
        #p:
        #  - off
        #  - b+e
#          - pmc
#          - pmcstar

#  mc_pre:
#    module: experiment.thp.tool.wmc.wmcExecutor.WMCPre
#    parameters:
#      #name of parameter configuration: we may have multiple ones
#      default:
#        s:
#          - b+e
#          - pmc
#          - pmcstar
#        t:
#          - 0
##          - 1

#  #TODO:
#  parameters:
#    # if you set "by" to "parameter"
#    #   it allows you to pin runs with the following parameter variations to
#    #   one node only, e.g.,
#    #   if specifiying s: minisat_t=0 and minisat_t=1 will run on one host
#    #   however, mergesat_t=0 may run on a different host than minisat_t=0
#    # if you set "by" to "tool"
#    #   all configurations of one tool will run on one node
#    node_pining_parameters:
#      by: parameter
#      parameters:
#        # observers.py:L40
#        - s
#    allow limitation to solver

#TODO:
runs:
  sat:
    all:
      - sat_gauss_bench
#      - sat2014_app_bench
#  asp:
#    all:
#      - asp_bench
  # mc:
  #   all:
  #     - dfremont


#TODO:
#config: "./benchmark_thp_bmc_sw.yml"
#config: "./benchmark_thp_bmc_hw.yml"
#config: "./benchmark_thp_maxsat.yml"
